<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- mobile layout extend -->
        <template id="layout_extend_partner" name="Main layout Extend">
            <t t-call="mobile.layout">
                <t t-raw="0" />
                <nav class="bar bar-tab">
                    <a class="tab-item active" href="#">
                        <span class="icon icon-home" />
                        <span class="tab-label">Home</span>
                    </a>
                    <a class="tab-item" href="#">
                        <span class="icon icon-person" />
                        <span class="tab-label">Profile</span>
                    </a>
                    <a class="tab-item" href="#">
                        <span class="icon icon-star-filled" />
                        <span class="tab-label">Favorites</span>
                    </a>
                    <a class="tab-item" href="#">
                        <span class="icon icon-search" />
                        <span class="tab-label">Search</span>
                    </a>
                    <a class="tab-item" href="/mobile/crm/partner/set_login">
                        <span class="icon icon-gear" />
                        <span class="tab-label">Settings</span>
                    </a>
                </nav>
            </t>
        </template>
        <template id="partner_list" name="Partner List">
            <t t-call="website_crm_partner.layout_extend_partner">
                <t t-set="title">Partner List</t>
                <div>
                    <!-- Top Bar -->
                    <header class="bar bar-nav">
                        <h1 class="title">Partners</h1>
                        <a class="icon icon-close pull-left" t-attf-href="/mobile/logout/#{ db }/#{ root[1:] }" />
                        <a class="icon icon-plus pull-right" href="/mobile/crm/partner/add" />
                    </header>
                    <!-- Content Zone -->
                    <div class="content">
                        <!-- Search Form -->
                        <form t-attf-action="#{ root }partner/" method="post">
                            <input type="search" placeholder="Partner name" name="search_words" />
                            <button class="btn btn-block btn-outlined" name="btn-search" value="btn-search" type="submit">
                                <span class="icon icon-search" />
                                Search
                            </button>
                        </form>
                        <!-- List Contacts -->
                        <ul t-if="partners" class="table-view">
                            <li t-foreach="partners" t-as="partner" class="table-view-cell">
                                <a class="navigate-right" t-attf-href="#{ root }partner/#{ partner.id }" data-transition="slide-in">
                                    <h3>
                                        <span t-esc="partner.name" />
                                    </h3>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </t>
        </template>
        <!-- Customer Information-->
        <template id="partner_detail" name="Partner Detail Information">
            <t t-call="website_crm_partner.layout_extend_partner">
                <t t-set="title">Partner Info</t>
                <div>
                    <!-- Top Bar -->
                    <header class="bar bar-nav">
                        <a class="control-item icon icon-left-nav pull-left" t-attf-href="#{ root }partner/" />
                        <h1 class="title">Partner Info</h1>
                    </header>
                    <!-- Content Zone -->
                    <div class="content">
                        <!-- Customer Info -->
                        <div class="content-padded">
                            <h3>
                                <span t-esc="partner.name" />
                            </h3>
                            <h6>Phone:</h6>
                            <p>
                                <span t-esc="partner.phone" />
                            </p>
                            <h6>Mobile:</h6>
                            <p>
                                <span t-esc="partner.mobile" />
                            </p>
                            <h6>Email:</h6>
                            <p>
                                <span t-esc="partner.email" />
                            </p>
                        </div>
                        <div class="bar bar-standard">
                            <form a-attf-href="#{ root }partner/#{ partner.id }/delete" method="get">
                                <button class="btn btn-negative pull-left" name="btn-delete" value="btn-delete" type="submit" onclick="return confirm('Are you sure?')">Delete</button>
                            </form>
                            <a class="icon icon-compose pull-right" t-attf-href="#{ root }partner/#{ partner.id }/edit" />
                        </div>
                    </div>
                </div>
            </t>
        </template>
        <!-- Partner edit -->
        <template id="partner_edit" name="Partner Edit">
            <t t-call="website_crm_partner.layout_extend_partner">
                <t t-set="title">Edit Partner</t>
                <div>
                    <!-- Top Bar -->
                    <header class="bar bar-nav">
                        <h1 class="title">Edit Partner</h1>
                        <a class="icon icon-left-nav pull-left" t-attf-href="/mobile/logout/#{ db }/#{ root[1:] }" />
                    </header>
                    <!-- Content Zone -->
                    <div class="content">
                        <!-- Edit Form -->
                        <div class="bar bar-standard">
                            <form action="/mobile/crm/partner/" method="post">
                                <div class="input-row">
                                    <label>
                                        <t t-esc="request.env['res.partner'].fields_get(['name'])['name']['string']" />
                                    </label>
                                    <input t-if="mode=='edit'" type="text" t-att-value="partner.name if partner else ''" placeholder="Mister Ratchet" />
                                    <span t-if="mode=='view'" t-field="partner.name" />
                                </div>
                                <div class="input-row">
                                    <label>Email</label>
                                    <input type="email" placeholder="ratchetframework@gmail.com" />
                                </div>
                                <div class="input-row">
                                    <label>Username</label>
                                    <input type="text" placeholder="goRatchet" />
                                </div>
                                <input type="text" name="name" t-att-value="partner.name if partner else ''" placeholder="Full name" required="1" />
                                <input type="hidden" name="id" t-att-value="partner.id if partner else False" />
                                <input type="hidden" name="type" value="contact" />
                                <textarea name="comment" rows="5">
                                    <t t-esc="partner.comment if partner else ''" />
                                </textarea>
                                <button class="btn btn-positive btn-block" name="btn-save" value="btn-save" type="submit">Save</button>
                            </form>
                        </div>
                    </div>
                </div>
            </t>
        </template>
        <template id="form_fields">
            <!-- model, field, mode, -->
            <form>
                <div class="input-row">
                    <label>
                        <t t-esc="request.env['res.partner'].fields_get(['name'])['name']['string']" />
                    </label>
                    <input t-if="mode=='edit'" type="text" t-att-value="partner.name if partner else ''" placeholder="Mister Ratchet" />
                    <span t-if="mode=='view'" t-field="partner.name" />
                </div>
            </form>
        </template>
        <!-- set login -->
        <template id="set_login" name="Set Login">
            <t t-call="website_crm_partner.layout_extend_partner">
                <t t-set="title">Set Login</t>
                <div>
                    <!-- Top Bar -->
                    <header class="bar bar-nav">
                        <h1 class="title">Set Login</h1>
                        <a class="icon icon-left-nav pull-left" t-attf-href="/mobile/logout/#{ db }/#{ root[1:] }" />
                    </header>
                    <!-- Content Zone -->
                    <div class="content">
                        <!-- Form -->
                        <form id="set_login" method="post">
                            <input id="database" name="database" type="text" placeholder="Database" required="1" />
                            <input id="username" name="username" type="text" placeholder="User name" required="1" />
                            <input id="password" type="password" placeholder="Password" required="1" />
                            <button class="btn btn-positive btn-block" name="btn-set_login_save" value="btn-set_login_save" type="submit" onclick="set_login()">Save</button>
                        </form>
                    </div>
                </div>
            </t>
        </template>
        <!-- Loading Module Assets -->
        <template id="assets_frontend" inherit_id="mobile.assets_frontend" name="mobile assets">
            <xpath expr="." position="inside">
                <script>
                    $(document).ready(function() {
                    document.getElementById("database").value = localStorage.getItem("database");
                    document.getElementById("username").value = localStorage.getItem("username");
                    document.getElementById("password").value = localStorage.getItem("password");
                    });

                    function set_login(){
                    localStorage.setItem("database", document.getElementById("database").value);
                    localStorage.setItem("username", document.getElementById("username").value);
                    localStorage.setItem("password", document.getElementById("password").value);
                    }
                </script>
            </xpath>
        </template>
    </data>
</openerp>
